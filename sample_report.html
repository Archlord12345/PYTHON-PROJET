<!DOCTYPE html>
<html class="light" lang="fr">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>SuperMarket POS - Analytics Dashboard</title>
    
    <!-- External Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com"/>
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet"/>
    
    <!-- Scripts -->
    <script src="https://cdn.tailwindcss.com?plugins=forms,typography"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/history@5/umd/history.development.js"></script>
    <script src="https://unpkg.com/react-router@6.3.0/umd/react-router.development.js"></script>
    <script src="https://unpkg.com/react-router-dom@6.3.0/umd/react-router-dom.development.js"></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>

    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        primary: "#137fec",
                        "background-light": "#f9fafb",
                        "background-dark": "#0f172a",
                    },
                    fontFamily: {
                        sans: ["Inter", "sans-serif"],
                        display: ["Inter", "sans-serif"],
                    },
                    borderRadius: {
                        DEFAULT: "0.375rem",
                    },
                },
            },
        };
    </script>
    <style>
        body { font-family: 'Inter', sans-serif; }
        .material-symbols-outlined {
            font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
        }
    </style>
</head>
<body class="bg-background-light dark:bg-zinc-950 text-slate-900 dark:text-zinc-100 min-h-screen">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;
        const { createRoot } = ReactDOM;
        const { MemoryRouter, Routes, Route, Link, useNavigate, useLocation } = ReactRouterDOM;

        // --- Shared Components ---

        const Sidebar = ({ currentTab }) => {
            const [isDark, setIsDark] = useState(false);

            const toggleDarkMode = () => {
                document.documentElement.classList.toggle('dark');
                setIsDark(!isDark);
            };

            const navItems = [
                { id: 'dashboard', label: 'Tableau de bord', icon: 'grid_view', path: '#' },
                { id: 'pos', label: 'Caisse', icon: 'shopping_cart', path: '#' },
                { id: 'articles', label: 'Articles', icon: 'inventory_2', path: '#' },
                { id: 'clients', label: 'Clients', icon: 'group', path: '#' },
                { id: 'reports', label: 'Rapports', icon: 'analytics', path: '/', active: true },
                { id: 'settings', label: 'Paramètres', icon: 'settings', path: '#' },
            ];

            return (
                <aside className="w-64 border-r border-slate-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 flex flex-col fixed inset-y-0 z-50">
                    <div className="p-6">
                        <h1 className="text-xl font-bold tracking-tight text-slate-900 dark:text-white">SuperMarket POS</h1>
                        <div className="mt-4">
                            <p className="text-sm font-semibold text-slate-900 dark:text-zinc-100">Pierre Martin</p>
                            <p className="text-xs text-slate-500 dark:text-zinc-400">Gestionnaire De Stock</p>
                        </div>
                    </div>
                    <nav className="flex-1 px-4 space-y-1">
                        {navItems.map((item) => (
                            <Link 
                                key={item.id}
                                to={item.path === '#' ? '/' : item.path} 
                                className={`flex items-center gap-3 px-3 py-2 text-sm font-medium rounded-lg transition-all ${
                                    item.id === 'reports' 
                                    ? "bg-slate-100 dark:bg-zinc-800 text-slate-900 dark:text-white" 
                                    : "text-slate-600 dark:text-zinc-400 hover:bg-slate-100 dark:hover:bg-zinc-800"
                                }`}
                            >
                                <span className="material-symbols-outlined text-[20px]">{item.icon}</span>
                                {item.label}
                            </Link>
                        ))}
                    </nav>
                    <div className="p-4 border-t border-slate-200 dark:border-zinc-800 space-y-2">
                        <div className="flex items-center justify-between px-3 py-2">
                            <span className="text-xs font-medium text-slate-500 dark:text-zinc-400 uppercase tracking-wider">Thème</span>
                            <button 
                                className="text-slate-600 dark:text-zinc-400 hover:text-primary dark:hover:text-white transition-colors" 
                                onClick={toggleDarkMode}
                            >
                                <span className="material-symbols-outlined text-[20px] dark:hidden">dark_mode</span>
                                <span className="material-symbols-outlined text-[20px] hidden dark:block">light_mode</span>
                            </button>
                        </div>
                        <button className="w-full flex items-center gap-3 px-3 py-2 text-sm font-medium text-slate-600 dark:text-zinc-400 hover:bg-slate-100 dark:hover:bg-zinc-800 rounded-lg border border-slate-200 dark:border-zinc-800 transition-all">
                            <span className="material-symbols-outlined text-[20px]">logout</span>
                            Déconnexion
                        </button>
                    </div>
                </aside>
            );
        };

        const PageHeader = () => (
            <header className="flex justify-between items-start mb-8">
                <div>
                    <h2 className="text-3xl font-bold text-slate-900 dark:text-white">Rapports & Analyses</h2>
                    <p className="text-slate-500 dark:text-zinc-400 text-sm mt-1">Statistiques et exports comptables</p>
                </div>
                <div className="flex gap-3">
                    <div className="relative">
                        <select className="appearance-none bg-white dark:bg-zinc-900 border border-slate-200 dark:border-zinc-800 rounded-lg px-4 py-2 pr-10 text-sm font-medium text-slate-700 dark:text-zinc-200 focus:outline-none focus:ring-2 focus:ring-primary/50">
                            <option>Cette semaine</option>
                            <option>Ce mois</option>
                            <option>Cette année</option>
                        </select>
                        <span className="material-symbols-outlined absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-slate-400 text-[18px]">expand_more</span>
                    </div>
                    <button className="flex items-center gap-2 bg-white dark:bg-zinc-900 border border-slate-200 dark:border-zinc-800 rounded-lg px-4 py-2 text-sm font-medium text-slate-700 dark:text-zinc-200 hover:bg-slate-50 dark:hover:bg-zinc-800 transition-all">
                        <span className="material-symbols-outlined text-[18px]">download</span>
                        Export Excel
                    </button>
                    <button className="flex items-center gap-2 bg-white dark:bg-zinc-900 border border-slate-200 dark:border-zinc-800 rounded-lg px-4 py-2 text-sm font-medium text-slate-700 dark:text-zinc-200 hover:bg-slate-50 dark:hover:bg-zinc-800 transition-all">
                        <span className="material-symbols-outlined text-[18px]">description</span>
                        Export PDF
                    </button>
                </div>
            </header>
        );

        const TabsNavigation = () => {
            const navigate = useNavigate();
            const location = useLocation();
            
            const tabs = [
                { id: 'ventes', label: 'Ventes', path: '/' },
                { id: 'stock', label: 'Stock', path: '/stock' },
                { id: 'finances', label: 'Finances', path: '/finances' },
            ];

            return (
                <div className="flex gap-1 mb-8 bg-slate-100/50 dark:bg-zinc-900/50 p-1 w-fit rounded-xl">
                    {tabs.map((tab) => (
                        <button
                            key={tab.id}
                            onClick={() => navigate(tab.path)}
                            className={`px-6 py-2 text-sm font-semibold rounded-lg transition-all ${
                                location.pathname === tab.path
                                    ? "bg-white dark:bg-zinc-800 text-slate-900 dark:text-white shadow-sm ring-1 ring-slate-200 dark:ring-zinc-700"
                                    : "text-slate-500 dark:text-zinc-400 hover:bg-slate-200/50 dark:hover:bg-zinc-800"
                            }`}
                        >
                            {tab.label}
                        </button>
                    ))}
                </div>
            );
        };

        // --- Screen Components ---

        const FinancesScreen = () => {
            return (
                <div className="ml-64 p-8 min-h-screen">
                    <PageHeader />
                    <TabsNavigation />
                    
                    <div className="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                        {[
                            { label: 'CA HT', value: '29,145 €', sub: 'Hors taxes' },
                            { label: 'TVA Collectée', value: '5,555 €', sub: 'À reverser' },
                            { label: 'CA TTC', value: '34,700 €', sub: 'Toutes taxes comprises' }
                        ].map((card, i) => (
                            <div key={i} className="bg-white dark:bg-zinc-900 p-6 rounded-xl border border-slate-200 dark:border-zinc-800 shadow-sm">
                                <p className="text-xs font-semibold text-slate-500 dark:text-zinc-400 uppercase tracking-wider mb-4">{card.label}</p>
                                <p className="text-3xl font-bold text-slate-900 dark:text-white mb-1">{card.value}</p>
                                <p className="text-xs text-slate-400 dark:text-zinc-500">{card.sub}</p>
                            </div>
                        ))}
                    </div>

                    <div className="bg-white dark:bg-zinc-900 rounded-xl border border-slate-200 dark:border-zinc-800 shadow-sm overflow-hidden">
                        <div className="p-6 border-b border-slate-100 dark:border-zinc-800">
                            <h3 className="font-semibold text-slate-900 dark:text-white">Détail TVA par taux</h3>
                        </div>
                        <div className="p-6 space-y-4">
                            {[
                                { rate: 'TVA 5,5%', base: '18,230 €', amount: '1,003 €' },
                                { rate: 'TVA 10%', base: '5,420 €', amount: '542 €' },
                                { rate: 'TVA 20%', base: '5,495 €', amount: '1,099 €' }
                            ].map((item, i) => (
                                <div key={i} className="flex items-center justify-between p-4 border border-slate-100 dark:border-zinc-800 rounded-lg hover:bg-slate-50 dark:hover:bg-zinc-800/50 transition-all">
                                    <div>
                                        <p className="font-medium text-slate-900 dark:text-white">{item.rate}</p>
                                        <p className="text-xs text-slate-500 dark:text-zinc-400">Base: {item.base}</p>
                                    </div>
                                    <div className="text-right">
                                        <p className="text-lg font-bold text-slate-900 dark:text-white">{item.amount}</p>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>
                </div>
            );
        };

        const StockScreen = () => {
            return (
                <div className="ml-64 p-8 min-h-screen">
                    <PageHeader />
                    <TabsNavigation />

                    <div className="bg-white dark:bg-zinc-900 border border-slate-200 dark:border-zinc-800 rounded-xl overflow-hidden shadow-sm">
                        <div className="px-8 py-6 border-b border-slate-200 dark:border-zinc-800">
                            <h3 className="text-lg font-semibold text-slate-900 dark:text-white">État des stocks</h3>
                        </div>
                        <div className="p-8">
                            <div className="flex justify-between items-center mb-8 pb-8 border-b border-slate-100 dark:border-zinc-800">
                                <div>
                                    <h4 className="text-base font-medium text-slate-900 dark:text-white">Valeur totale du stock</h4>
                                    <p className="text-sm text-slate-500 dark:text-slate-400">Tous produits confondus</p>
                                </div>
                                <div className="text-3xl font-bold text-slate-900 dark:text-white">125,430 €</div>
                            </div>
                            <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                                <div className="bg-green-50/50 dark:bg-green-900/10 border border-green-100 dark:border-green-900/30 p-6 rounded-xl">
                                    <p className="text-sm font-medium text-green-700 dark:text-green-400 mb-2">Stock normal</p>
                                    <div className="flex items-baseline gap-2">
                                        <span className="text-3xl font-bold text-green-600 dark:text-green-500">234</span>
                                        <span className="text-xs text-green-700/70 dark:text-green-400/70">produits</span>
                                    </div>
                                </div>
                                <div className="bg-orange-50/50 dark:bg-orange-900/10 border border-orange-100 dark:border-orange-900/30 p-6 rounded-xl">
                                    <p className="text-sm font-medium text-orange-700 dark:text-orange-400 mb-2">Stock bas</p>
                                    <div className="flex items-baseline gap-2">
                                        <span className="text-3xl font-bold text-orange-600 dark:text-orange-500">12</span>
                                    </div>
                                    <p className="text-xs text-orange-700/70 dark:text-orange-400/70 mt-1">produits à réapprovisionner</p>
                                </div>
                                <div className="bg-red-50/50 dark:bg-red-900/10 border border-red-100 dark:border-red-900/30 p-6 rounded-xl">
                                    <p className="text-sm font-medium text-red-700 dark:text-red-400 mb-2">Rupture</p>
                                    <div className="flex items-baseline gap-2">
                                        <span className="text-3xl font-bold text-red-600 dark:text-red-500">3</span>
                                    </div>
                                    <p className="text-xs text-red-700/70 dark:text-red-400/70 mt-1">produits en rupture</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div className="mt-8 grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <div className="bg-white dark:bg-zinc-900 border border-slate-200 dark:border-zinc-800 rounded-xl p-6 shadow-sm">
                            <h4 className="text-sm font-semibold text-slate-500 dark:text-zinc-400 uppercase tracking-wider mb-4">Derniers mouvements</h4>
                            <div className="space-y-4">
                                {[
                                    { name: 'Lait Entier 1L', desc: '+48 unités • Réception', time: 'Il y a 2h' },
                                    { name: 'Pâtes Penne 500g', desc: '-12 unités • Vente', time: 'Il y a 3h' }
                                ].map((item, i) => (
                                    <div key={i} className="flex items-center justify-between py-2 border-b border-slate-50 dark:border-zinc-800 last:border-0">
                                        <div className="flex items-center gap-3">
                                            <div className="w-10 h-10 rounded bg-slate-100 dark:bg-zinc-800 flex items-center justify-center">
                                                <span className="material-icons-outlined text-slate-400">inventory</span>
                                            </div>
                                            <div>
                                                <p className="text-sm font-medium dark:text-white">{item.name}</p>
                                                <p className="text-xs text-slate-500 dark:text-zinc-400">{item.desc}</p>
                                            </div>
                                        </div>
                                        <p className="text-xs text-slate-400">{item.time}</p>
                                    </div>
                                ))}
                            </div>
                        </div>
                        <div className="bg-white dark:bg-zinc-900 border border-slate-200 dark:border-zinc-800 rounded-xl p-6 shadow-sm">
                            <h4 className="text-sm font-semibold text-slate-500 dark:text-zinc-400 uppercase tracking-wider mb-4">Alertes prioritaires</h4>
                            <div className="flex items-start gap-4 p-4 bg-red-50 dark:bg-red-900/10 rounded-lg">
                                <span className="material-icons-outlined text-red-500 mt-0.5">warning</span>
                                <div>
                                    <p className="text-sm font-semibold text-red-900 dark:text-red-400">3 produits en rupture totale</p>
                                    <p className="text-xs text-red-700 dark:text-red-400/70 mt-1">Huile d'olive, Sucre roux, et Farine T55 ne sont plus en stock. Action immédiate requise.</p>
                                    <button className="mt-3 text-xs font-bold text-red-600 dark:text-red-400 hover:underline">Voir les produits</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const VentesScreen = () => {
            return (
                <div className="ml-64 p-8 min-h-screen">
                    <PageHeader />
                    <TabsNavigation />

                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                        {[
                            { label: 'CA Total', value: '34,700 €', trend: '+18% vs période précédente', trendUp: true },
                            { label: 'Transactions', value: '432', trend: 'Sur la période', trendUp: null },
                            { label: 'Panier moyen', value: '80.32 €', trend: '+5% vs période précédente', trendUp: true },
                            { label: 'Produits vendus', value: '5,234', trend: 'Articles au total', trendUp: null }
                        ].map((stat, i) => (
                            <div key={i} className="bg-white dark:bg-zinc-900 p-6 rounded-2xl border border-slate-200 dark:border-zinc-800 shadow-sm">
                                <h3 className="text-sm font-medium text-slate-500 dark:text-zinc-400 mb-4">{stat.label}</h3>
                                <p className="text-2xl font-bold mb-1 dark:text-white">{stat.value}</p>
                                <p className={`text-xs font-medium ${stat.trendUp ? 'text-green-600' : 'text-slate-400'}`}>{stat.trend}</p>
                            </div>
                        ))}
                    </div>

                    <div className="grid grid-cols-1 lg:grid-cols-5 gap-6 mb-8">
                        <div className="lg:col-span-3 bg-white dark:bg-zinc-900 p-6 rounded-2xl border border-slate-200 dark:border-zinc-800 shadow-sm min-h-[350px] flex flex-col">
                            <h3 className="text-sm font-semibold text-slate-800 dark:text-slate-100 mb-6">Ventes par jour</h3>
                            <div className="flex-1 flex items-center justify-center border-2 border-dashed border-slate-100 dark:border-zinc-800 rounded-xl">
                                <span className="text-slate-300 dark:text-zinc-700 material-icons-outlined text-6xl">insights</span>
                            </div>
                        </div>
                        <div className="lg:col-span-2 bg-white dark:bg-zinc-900 p-6 rounded-2xl border border-slate-200 dark:border-zinc-800 shadow-sm min-h-[350px] flex flex-col">
                            <h3 className="text-sm font-semibold text-slate-800 dark:text-slate-100 mb-6">Ventes par catégorie</h3>
                            <div className="flex-1 flex items-center justify-center border-2 border-dashed border-slate-100 dark:border-zinc-800 rounded-xl">
                                <span className="text-slate-300 dark:text-zinc-700 material-icons-outlined text-6xl">pie_chart</span>
                            </div>
                        </div>
                    </div>

                    <div className="bg-white dark:bg-zinc-900 p-6 rounded-2xl border border-slate-200 dark:border-zinc-800 shadow-sm">
                        <h3 className="text-sm font-semibold text-slate-800 dark:text-slate-100 mb-6">Répartition des modes de paiement</h3>
                        <div className="grid grid-cols-1 lg:grid-cols-2 gap-12">
                            <div className="flex items-center justify-center py-8">
                                <div className="relative w-48 h-48 rounded-full border-[16px] border-slate-100 dark:border-zinc-800 flex items-center justify-center">
                                    <div className="absolute inset-0 rounded-full border-[16px] border-blue-500" style={{clipPath: 'polygon(50% 50%, 50% 0%, 100% 0%, 100% 80%, 50% 50%)'}}></div>
                                    <div className="absolute inset-0 rounded-full border-[16px] border-emerald-500" style={{clipPath: 'polygon(50% 50%, 0% 100%, 0% 20%, 50% 0%, 50% 50%)', transform: 'rotate(180deg)'}}></div>
                                    <div className="text-center">
                                        <span className="text-xs text-slate-500 uppercase font-bold tracking-wider">Total</span>
                                        <p className="text-xl font-bold dark:text-white">24,700 €</p>
                                    </div>
                                </div>
                            </div>
                            <div className="space-y-3">
                                {[
                                    { label: 'Carte bancaire', amount: '12,500 €', color: 'bg-blue-500' },
                                    { label: 'Espèces', amount: '8,300 €', color: 'bg-emerald-500' },
                                    { label: 'Chèque', amount: '2,100 €', color: 'bg-amber-500' },
                                    { label: 'Ticket restaurant', amount: '1,800 €', color: 'bg-purple-500' }
                                ].map((pay, i) => (
                                    <div key={i} className="flex items-center justify-between p-4 bg-slate-50 dark:bg-zinc-800/50 rounded-xl">
                                        <div className="flex items-center gap-3">
                                            <div className={`w-3 h-3 rounded-sm ${pay.color}`}></div>
                                            <span className="text-sm font-medium dark:text-zinc-200">{pay.label}</span>
                                        </div>
                                        <span className="text-sm font-bold dark:text-white">{pay.amount}</span>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // --- Main App ---

        const App = () => {
            return (
                <MemoryRouter>
                    <div className="min-h-screen bg-background-light dark:bg-zinc-950 transition-colors duration-200">
                        <Sidebar />
                        <Routes>
                            <Route path="/" element={<VentesScreen />} />
                            <Route path="/stock" element={<StockScreen />} />
                            <Route path="/finances" element={<FinancesScreen />} />
                        </Routes>
                    </div>
                </MemoryRouter>
            );
        };

        const root = createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>